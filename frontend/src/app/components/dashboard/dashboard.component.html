<div class="dashboard-container">
  <!-- Angular Material Header -->
  <mat-toolbar color="primary" class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <mat-icon class="header-icon">account_balance_wallet</mat-icon>
        <h1 class="app-title">Splitwise Clone</h1>
      </div>
      
      <div class="header-right">
        <!-- User Welcome -->
        <div class="user-welcome" *ngIf="currentUser">
          <mat-icon>person</mat-icon>
          <span>Welcome, {{ currentUser.firstName }} {{ currentUser.lastName }}</span>
        </div>
        
        <!-- User Menu -->
        <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-menu-btn">
          <mat-icon>account_circle</mat-icon>
        </button>
        
        <mat-menu #userMenu="matMenu" xPosition="before">
          <button mat-menu-item [routerLink]="['/dashboard/profile']">
            <mat-icon>person</mat-icon>
            <span>Profile</span>
          </button>
          <button mat-menu-item [routerLink]="['/dashboard/notifications']">
            <mat-icon>notifications</mat-icon>
            <span>Notifications</span>
          </button>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="toggleTheme()">
            <mat-icon>{{ isDarkMode ? 'light_mode' : 'dark_mode' }}</mat-icon>
            <span>{{ isDarkMode ? 'Light Mode' : 'Dark Mode' }}</span>
          </button>
          <button mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            <span>Logout</span>
          </button>
        </mat-menu>
      </div>
    </div>
  </mat-toolbar>

  <div class="dashboard-content">
    <!-- Angular Material Sidebar -->
    <mat-sidenav-container class="sidenav-container">
      <mat-sidenav mode="side" opened class="sidebar">
        <div class="sidebar-header">
          <h3>Navigation</h3>
        </div>
        
        <mat-nav-list class="sidebar-menu">
          <mat-list-item 
            [routerLink]="['/dashboard/groups']" 
            routerLinkActive="active"
            (click)="onTabChange('groups')">
            <mat-icon matListItemIcon>groups</mat-icon>
            <span matListItemTitle>Groups</span>
            <mat-chip *ngIf="getGroupCount() > 0" matListItemMeta>{{ getGroupCount() }}</mat-chip>
          </mat-list-item>
          
          <mat-list-item 
            [routerLink]="['/dashboard/expenses']" 
            routerLinkActive="active"
            (click)="onTabChange('expenses')">
            <mat-icon matListItemIcon>receipt</mat-icon>
            <span matListItemTitle>Expenses</span>
            <mat-chip *ngIf="getExpenseCount() > 0" matListItemMeta>{{ getExpenseCount() }}</mat-chip>
          </mat-list-item>

          <mat-divider></mat-divider>
          
          <mat-list-item 
            [routerLink]="['/dashboard/contacts']" 
            routerLinkActive="active"
            (click)="onTabChange('contacts')">
            <mat-icon matListItemIcon>contacts</mat-icon>
            <span matListItemTitle>Contacts</span>
          </mat-list-item>
          
          <mat-list-item 
            [routerLink]="['/dashboard/profile']" 
            routerLinkActive="active"
            (click)="onTabChange('profile')">
            <mat-icon matListItemIcon>person</mat-icon>
            <span matListItemTitle>Profile</span>
          </mat-list-item>
          
          <mat-list-item 
            [routerLink]="['/dashboard/notifications']" 
            routerLinkActive="active"
            (click)="onTabChange('notifications')">
            <mat-icon matListItemIcon>notifications</mat-icon>
            <span matListItemTitle>Notifications</span>
          </mat-list-item>
        </mat-nav-list>
      </mat-sidenav>
      
      <!-- Main Content Area -->
      <mat-sidenav-content class="main-content">
        <div class="content-wrapper">
          <router-outlet></router-outlet>
        </div>
      </mat-sidenav-content>
    </mat-sidenav-container>
  </div>
</div>