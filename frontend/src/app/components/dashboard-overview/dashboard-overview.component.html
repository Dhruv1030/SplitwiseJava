<div class="overview-container">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <h1 class="page-title">Good {{ getGreeting() }}, {{ currentUser?.firstName }}! ðŸ‘‹</h1>
    <p class="page-subtitle">Here's your expense overview</p>
  </div>

  <!-- Summary Cards -->
  <div class="summary-cards">
    <!-- Total Balance Card -->
    <mat-card class="summary-card balance-card" [ngClass]="getBalanceColor(summaryData.totalBalance)">
      <mat-card-content>
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>account_balance_wallet</mat-icon>
          </div>
          <div class="card-info">
            <h3 class="card-title">Total Balance</h3>
            <p class="card-amount">{{ formatCurrency(summaryData.totalBalance) }}</p>
          </div>
        </div>
        <div class="card-trend" *ngIf="summaryData.totalBalance !== 0">
          <mat-icon class="trend-icon">{{ summaryData.totalBalance > 0 ? 'trending_up' : 'trending_down' }}</mat-icon>
          <span class="trend-text">
            {{ summaryData.totalBalance > 0 ? 'You are owed overall' : 'You owe overall' }}
          </span>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- You Owe Card -->
    <mat-card class="summary-card owe-card">
      <mat-card-content>
        <div class="card-header">
          <div class="card-icon negative">
            <mat-icon>arrow_upward</mat-icon>
          </div>
          <div class="card-info">
            <h3 class="card-title">You Owe</h3>
            <p class="card-amount negative">{{ formatCurrency(summaryData.youOwe) }}</p>
          </div>
        </div>
        <div class="card-action">
          <button mat-button class="settle-btn">
            <mat-icon>payment</mat-icon>
            Settle Up
          </button>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- You Are Owed Card -->
    <mat-card class="summary-card owed-card">
      <mat-card-content>
        <div class="card-header">
          <div class="card-icon positive">
            <mat-icon>arrow_downward</mat-icon>
          </div>
          <div class="card-info">
            <h3 class="card-title">You Are Owed</h3>
            <p class="card-amount positive">{{ formatCurrency(summaryData.youAreOwed) }}</p>
          </div>
        </div>
        <div class="card-action">
          <button mat-button class="remind-btn">
            <mat-icon>notifications_active</mat-icon>
            Send Reminder
          </button>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Monthly Expenses Card -->
    <mat-card class="summary-card monthly-card">
      <mat-card-content>
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>calendar_today</mat-icon>
          </div>
          <div class="card-info">
            <h3 class="card-title">This Month</h3>
            <p class="card-amount">{{ formatCurrency(summaryData.monthlyExpenses) }}</p>
          </div>
        </div>
        <div class="card-trend">
          <mat-icon class="trend-icon">trending_up</mat-icon>
          <span class="trend-text">+12% from last month</span>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h2 class="section-title">Quick Actions</h2>
    <div class="action-cards">
      <mat-card class="action-card" (click)="navigateToAddExpense()">
        <mat-card-content>
          <div class="action-icon">
            <mat-icon>add_circle</mat-icon>
          </div>
          <h3 class="action-title">Add Expense</h3>
          <p class="action-subtitle">Record a new expense</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="action-card" (click)="navigateToCreateGroup()">
        <mat-card-content>
          <div class="action-icon">
            <mat-icon>group_add</mat-icon>
          </div>
          <h3 class="action-title">Create Group</h3>
          <p class="action-subtitle">Start a new expense group</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="action-card" (click)="navigateToAddFriend()">
        <mat-card-content>
          <div class="action-icon">
            <mat-icon>person_add</mat-icon>
          </div>
          <h3 class="action-title">Add Friend</h3>
          <p class="action-subtitle">Invite friends to split expenses</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="action-card" (click)="navigateToSettleUp()">
        <mat-card-content>
          <div class="action-icon">
            <mat-icon>payment</mat-icon>
          </div>
          <h3 class="action-title">Settle Up</h3>
          <p class="action-subtitle">Pay your outstanding balances</p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="recent-activity">
    <div class="section-header">
      <h2 class="section-title">Recent Activity</h2>
      <button mat-button class="view-all-btn" routerLink="/dashboard/expenses">
        View All
        <mat-icon>arrow_forward</mat-icon>
      </button>
    </div>

    <div class="activity-list" *ngIf="recentExpenses.length > 0; else noActivity">
      <mat-card class="activity-item" *ngFor="let expense of recentExpenses">
        <mat-card-content>
          <div class="activity-content">
            <div class="activity-icon">
              <mat-icon>receipt</mat-icon>
            </div>
            <div class="activity-details">
              <h4 class="activity-title">{{ expense.description }}</h4>
              <p class="activity-meta">
                <span class="activity-group">{{ expense.group }}</span>
                <span class="activity-date">{{ expense.date | date:'MMM d' }}</span>
              </p>
              <div class="activity-participants">
                <span class="participant-text">Split between:</span>
                <div class="participants-list">
                  <span class="participant" *ngFor="let participant of expense.participants">
                    {{ participant }}
                  </span>
                </div>
              </div>
            </div>
            <div class="activity-amount">
              <span class="amount">{{ formatCurrency(expense.amount) }}</span>
              <span class="paid-by">Paid by {{ expense.paidBy }}</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <ng-template #noActivity>
      <mat-card class="empty-state">
        <mat-card-content>
          <div class="empty-content">
            <mat-icon class="empty-icon">receipt_long</mat-icon>
            <h3>No recent activity</h3>
            <p>Start by adding an expense or creating a group</p>
            <button mat-raised-button color="primary" (click)="navigateToAddExpense()">
              <mat-icon>add</mat-icon>
              Add Your First Expense
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </ng-template>
  </div>
</div>
